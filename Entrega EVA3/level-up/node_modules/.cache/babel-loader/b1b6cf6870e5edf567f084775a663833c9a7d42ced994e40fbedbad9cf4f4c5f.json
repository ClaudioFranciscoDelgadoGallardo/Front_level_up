{"ast":null,"code":"import _objectSpread from\"C:/Users/SoraR/OneDrive/Escritorio/Codigo/Front_level_up/Entrega EVA2/level-up/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{registrarLogUsuario,registrarLogAdmin}from'../utils/logManager';import'../styles/Login.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){const navigate=useNavigate();const[formData,setFormData]=useState({email:'',password:''});const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const validarFormulario=()=>{if(!formData.email||formData.email.trim().length===0){if(window.notificar){window.notificar('El correo es obligatorio','error',3000);}return false;}if(!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email)){if(window.notificar){window.notificar('Debes ingresar un correo válido','error',3000);}return false;}if(!formData.password||formData.password.trim().length===0){if(window.notificar){window.notificar('La contraseña es obligatoria','error',3000);}return false;}return true;};const handleSubmit=e=>{e.preventDefault();if(!validarFormulario()){return;}const usuarios=JSON.parse(localStorage.getItem('usuarios')||'[]');const usuario=usuarios.find(u=>(u.correo===formData.email||u.email===formData.email)&&u.password===formData.password);if(usuario){localStorage.setItem('usuarioActual',JSON.stringify(usuario));if(usuario.rol==='admin'){registrarLogAdmin(\"Inici\\xF3 sesi\\xF3n: \".concat(usuario.nombre,\" \").concat(usuario.apellidos||'',\" (\").concat(usuario.correo,\")\"));}else{registrarLogUsuario(\"Inici\\xF3 sesi\\xF3n: \".concat(usuario.nombre,\" \").concat(usuario.apellidos||'',\" (\").concat(usuario.correo,\")\"));}if(window.notificar){window.notificar(\"\\xA1Bienvenido \".concat(usuario.nombre,\"!\"),'success',3000);}setTimeout(()=>{if(usuario.rol==='admin'){navigate('/admin');}else{navigate('/');}},1000);}else{if(window.notificar){window.notificar('Credenciales incorrectas. Prueba: admin@levelup.cl / admin123','error',4000);}}};return/*#__PURE__*/_jsxs(\"main\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"Inicio de sesi\\xF3n\"}),/*#__PURE__*/_jsxs(\"form\",{id:\"form-login\",onSubmit:handleSubmit,noValidate:true,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"login-email\",children:\"Correo\"}),/*#__PURE__*/_jsx(\"input\",{id:\"login-email\",name:\"email\",type:\"email\",value:formData.email,onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"login-pass\",children:\"Contrase\\xF1a\"}),/*#__PURE__*/_jsx(\"input\",{id:\"login-pass\",name:\"password\",type:\"password\",value:formData.password,onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",type:\"submit\",children:\"Ingresar\"})]})]});}","map":{"version":3,"names":["React","useState","useNavigate","registrarLogUsuario","registrarLogAdmin","jsx","_jsx","jsxs","_jsxs","Login","navigate","formData","setFormData","email","password","handleChange","e","name","value","target","prev","_objectSpread","validarFormulario","trim","length","window","notificar","test","handleSubmit","preventDefault","usuarios","JSON","parse","localStorage","getItem","usuario","find","u","correo","setItem","stringify","rol","concat","nombre","apellidos","setTimeout","className","children","id","onSubmit","noValidate","htmlFor","type","onChange"],"sources":["C:/Users/SoraR/OneDrive/Escritorio/Codigo/Front_level_up/Entrega EVA2/level-up/src/pages/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { registrarLogUsuario, registrarLogAdmin } from '../utils/logManager';\r\nimport '../styles/Login.css';\r\n\r\nexport default function Login() {\r\n  const navigate = useNavigate();\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: ''\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const validarFormulario = () => {\r\n    if (!formData.email || formData.email.trim().length === 0) {\r\n      if (window.notificar) {\r\n        window.notificar('El correo es obligatorio', 'error', 3000);\r\n      }\r\n      return false;\r\n    }\r\n\r\n    if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email)) {\r\n      if (window.notificar) {\r\n        window.notificar('Debes ingresar un correo válido', 'error', 3000);\r\n      }\r\n      return false;\r\n    }\r\n\r\n    if (!formData.password || formData.password.trim().length === 0) {\r\n      if (window.notificar) {\r\n        window.notificar('La contraseña es obligatoria', 'error', 3000);\r\n      }\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validarFormulario()) {\r\n      return;\r\n    }\r\n\r\n    const usuarios = JSON.parse(localStorage.getItem('usuarios') || '[]');\r\n    const usuario = usuarios.find(u => \r\n      (u.correo === formData.email || u.email === formData.email) && \r\n      u.password === formData.password\r\n    );\r\n    \r\n    if (usuario) {\r\n      localStorage.setItem('usuarioActual', JSON.stringify(usuario));\r\n      \r\n      if (usuario.rol === 'admin') {\r\n        registrarLogAdmin(`Inició sesión: ${usuario.nombre} ${usuario.apellidos || ''} (${usuario.correo})`);\r\n      } else {\r\n        registrarLogUsuario(`Inició sesión: ${usuario.nombre} ${usuario.apellidos || ''} (${usuario.correo})`);\r\n      }\r\n      \r\n      if (window.notificar) {\r\n        window.notificar(`¡Bienvenido ${usuario.nombre}!`, 'success', 3000);\r\n      }\r\n      \r\n      setTimeout(() => {\r\n        if (usuario.rol === 'admin') {\r\n          navigate('/admin');\r\n        } else {\r\n          navigate('/');\r\n        }\r\n      }, 1000);\r\n    } else {\r\n      if (window.notificar) {\r\n        window.notificar('Credenciales incorrectas. Prueba: admin@levelup.cl / admin123', 'error', 4000);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"container\">\r\n      <h2 className=\"section-title\">Inicio de sesión</h2>\r\n      <form id=\"form-login\" onSubmit={handleSubmit} noValidate>\r\n        <label htmlFor=\"login-email\">Correo</label>\r\n        <input \r\n          id=\"login-email\"\r\n          name=\"email\"\r\n          type=\"email\"\r\n          value={formData.email}\r\n          onChange={handleChange}\r\n        />\r\n\r\n        <label htmlFor=\"login-pass\">Contraseña</label>\r\n        <input \r\n          id=\"login-pass\"\r\n          name=\"password\"\r\n          type=\"password\"\r\n          value={formData.password}\r\n          onChange={handleChange}\r\n        />\r\n\r\n        <button className=\"btn btn-success\" type=\"submit\">Ingresar</button>\r\n      </form>\r\n    </main>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}