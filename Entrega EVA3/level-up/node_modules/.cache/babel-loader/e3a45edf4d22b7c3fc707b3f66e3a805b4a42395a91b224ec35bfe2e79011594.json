{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SoraR\\\\OneDrive\\\\Escritorio\\\\Codigo\\\\Front_level_up\\\\Entrega EVA3\\\\level-up\\\\src\\\\pages\\\\AdminProductoForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Link, useNavigate, useParams } from 'react-router-dom';\nimport { registrarLogAdmin } from '../utils/logManager';\nimport { getProductoPorCodigo, actualizarProducto, crearProducto } from '../utils/api';\nimport '../styles/Admin.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AdminProductoForm() {\n  _s();\n  const {\n    codigo\n  } = useParams();\n  const navigate = useNavigate();\n  const esEdicion = !!codigo;\n  const [productoId, setProductoId] = useState(null);\n  const [formData, setFormData] = useState({\n    codigo: '',\n    nombre: '',\n    categoria: 'Juegos de Mesa',\n    precio: '',\n    stock: '',\n    descripcion: '',\n    imagen: ''\n  });\n  useEffect(() => {\n    if (esEdicion) {\n      cargarProducto();\n    }\n  }, [codigo, esEdicion]);\n  const cargarProducto = async () => {\n    try {\n      const response = await getProductoPorCodigo(codigo);\n      const p = response.data;\n      setProductoId(p.id); // Guardar el ID para la actualizaci√≥n\n\n      const mapearCategoria = categoriaId => {\n        const categorias = {\n          1: 'Consolas',\n          2: 'Videojuegos',\n          3: 'Accesorios',\n          4: 'PC Gaming',\n          5: 'Auriculares'\n        };\n        return categorias[categoriaId] || 'Otros';\n      };\n      setFormData({\n        codigo: p.codigo,\n        nombre: p.nombre,\n        categoria: mapearCategoria(p.categoriaId),\n        precio: p.precioVenta || p.precio || 0,\n        stock: p.stockActual || p.stock || 0,\n        descripcion: p.descripcion || '',\n        imagen: p.imagenUrl || p.imagen || '/assets/imgs/destacado1.png'\n      });\n    } catch (error) {\n      console.error('Error al cargar producto:', error);\n\n      // Fallback a localStorage\n      const productos = JSON.parse(localStorage.getItem('productos') || '[]');\n      const producto = productos.find(p => p.codigo === codigo);\n      if (producto) {\n        setFormData(producto);\n        setProductoId(producto.id);\n      } else {\n        if (window.notificar) {\n          window.notificar('Producto no encontrado', 'error', 3000);\n        }\n        navigate('/admin/productos');\n      }\n    }\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleImageChange = e => {\n    const file = e.target.files[0];\n    if (file) {\n      if (file.size > 5000000) {\n        if (window.notificar) {\n          window.notificar('La imagen no puede pesar m√°s de 5MB', 'error', 3000);\n        }\n        return;\n      }\n      if (!file.type.startsWith('image/')) {\n        if (window.notificar) {\n          window.notificar('Solo se permiten archivos de imagen', 'error', 3000);\n        }\n        return;\n      }\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setFormData(prev => ({\n          ...prev,\n          imagen: reader.result\n        }));\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!formData.codigo.trim() || !formData.nombre.trim() || !formData.precio || !formData.stock || !formData.descripcion.trim() || !formData.imagen.trim()) {\n      if (window.notificar) {\n        window.notificar('Por favor completa todos los campos obligatorios', 'error', 3000);\n      }\n      return;\n    }\n    const precio = parseFloat(formData.precio);\n    if (precio >= 10000000) {\n      if (window.notificar) {\n        window.notificar('El precio no puede ser mayor o igual a $10.000.000', 'error', 3000);\n      }\n      return;\n    }\n    if (precio <= 0) {\n      if (window.notificar) {\n        window.notificar('El precio debe ser mayor a $0', 'error', 3000);\n      }\n      return;\n    }\n    const stock = parseInt(formData.stock);\n    if (stock >= 10000000) {\n      if (window.notificar) {\n        window.notificar('El stock no puede ser mayor o igual a 10.000.000', 'error', 3000);\n      }\n      return;\n    }\n    if (stock < 0) {\n      if (window.notificar) {\n        window.notificar('El stock no puede ser negativo', 'error', 3000);\n      }\n      return;\n    }\n    try {\n      if (esEdicion) {\n        // Actualizar producto en el backend\n        const payload = {\n          nombre: formData.nombre,\n          precioVenta: parseFloat(formData.precio),\n          stockActual: parseInt(formData.stock),\n          descripcion: formData.descripcion,\n          imagenUrl: formData.imagen\n        };\n        await actualizarProducto(productoId, payload);\n        registrarLogAdmin(`Edit√≥ producto: ${formData.nombre} (${formData.codigo})`);\n        if (window.notificar) {\n          window.notificar('Producto actualizado exitosamente', 'success', 3000);\n        }\n        navigate('/admin/productos');\n      } else {\n        // Crear nuevo producto en el backend\n        const mapearCategoriaAId = categoria => {\n          const categorias = {\n            'Consolas': 1,\n            'Videojuegos': 2,\n            'Accesorios': 3,\n            'PC Gaming': 4,\n            'Auriculares': 5,\n            'Juegos de Mesa': 3,\n            'Figuras': 3,\n            'Otros': 3\n          };\n          return categorias[categoria] || 3;\n        };\n        const payload = {\n          codigo: formData.codigo,\n          nombre: formData.nombre,\n          descripcion: formData.descripcion,\n          categoriaId: mapearCategoriaAId(formData.categoria),\n          marca: 'Gen√©rica',\n          precioBase: parseFloat(formData.precio) * 0.85,\n          precioVenta: parseFloat(formData.precio),\n          costo: parseFloat(formData.precio) * 0.7,\n          stockActual: parseInt(formData.stock),\n          imagenUrl: formData.imagen,\n          destacado: false,\n          activo: true\n        };\n        await crearProducto(payload);\n        registrarLogAdmin(`Cre√≥ producto: ${formData.nombre} (${formData.codigo})`);\n        if (window.notificar) {\n          window.notificar('Producto creado exitosamente', 'success', 3000);\n        }\n        navigate('/admin/productos');\n      }\n    } catch (error) {\n      var _error$response, _error$response$data, _error$response2;\n      console.error('Error al guardar producto:', error);\n      let mensajeError = 'Error al guardar el producto. Intenta nuevamente.';\n      if ((_error$response = error.response) !== null && _error$response !== void 0 && (_error$response$data = _error$response.data) !== null && _error$response$data !== void 0 && _error$response$data.error) {\n        mensajeError = error.response.data.error;\n      } else if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 409) {\n        mensajeError = 'Ya existe un producto con ese c√≥digo';\n      }\n      if (window.notificar) {\n        window.notificar(mensajeError, 'error', 3000);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"container admin-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"section-title mb-2\",\n        children: esEdicion ? 'Editar Producto' : 'Nuevo Producto'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/admin/productos\",\n        className: \"text-secondary\",\n        children: \"\\u2190 Volver a Productos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"admin-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"codigo\",\n            className: \"form-label\",\n            children: \"C\\xF3digo *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            id: \"codigo\",\n            name: \"codigo\",\n            value: formData.codigo,\n            onChange: handleChange,\n            disabled: esEdicion\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"nombre\",\n            className: \"form-label\",\n            children: \"Nombre *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            id: \"nombre\",\n            name: \"nombre\",\n            value: formData.nombre,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"categoria\",\n            className: \"form-label\",\n            children: \"Categor\\xEDa *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-select\",\n            id: \"categoria\",\n            name: \"categoria\",\n            value: formData.categoria,\n            onChange: handleChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Juegos de Mesa\",\n              children: \"Juegos de Mesa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Accesorios\",\n              children: \"Accesorios\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Consolas\",\n              children: \"Consolas\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Videojuegos\",\n              children: \"Videojuegos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Figuras\",\n              children: \"Figuras\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Otros\",\n              children: \"Otros\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-3 mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"precio\",\n            className: \"form-label\",\n            children: \"Precio *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            className: \"form-control\",\n            id: \"precio\",\n            name: \"precio\",\n            value: formData.precio,\n            onChange: handleChange,\n            min: \"1\",\n            max: \"9999999\",\n            step: \"1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-3 mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"stock\",\n            className: \"form-label\",\n            children: \"Stock *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            className: \"form-control\",\n            id: \"stock\",\n            name: \"stock\",\n            value: formData.stock,\n            onChange: handleChange,\n            min: \"0\",\n            max: \"9999999\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"descripcion\",\n            className: \"form-label\",\n            children: \"Descripci\\xF3n *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"form-control\",\n            id: \"descripcion\",\n            name: \"descripcion\",\n            value: formData.descripcion,\n            onChange: handleChange,\n            rows: \"3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"imagen\",\n            className: \"form-label\",\n            children: \"Imagen del Producto *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"imagenFile\",\n              className: \"btn btn-success w-100 admin-form-imagen-label\",\n              children: \"\\uD83D\\uDCC1 Seleccionar Imagen desde el Computador\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              className: \"form-control admin-form-imagen-input-hidden\",\n              id: \"imagenFile\",\n              accept: \"image/*\",\n              onChange: handleImageChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"admin-form-imagen-info\",\n              children: \"Formatos: JPG, PNG, GIF. M\\xE1ximo 5MB\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-2 admin-form-url-label\",\n            children: \"O ingresa una URL:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            id: \"imagen\",\n            name: \"imagen\",\n            value: formData.imagen,\n            onChange: handleChange,\n            placeholder: \"/assets/imgs/producto.png o https://ejemplo.com/imagen.jpg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 13\n          }, this), formData.imagen && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-white mb-2\",\n              children: \"Vista previa:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: formData.imagen,\n              alt: \"Preview\",\n              className: \"admin-form-preview-img\",\n              onError: e => {\n                e.target.src = '/assets/icons/icono.png';\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex gap-3 mt-4 justify-content-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-success px-5\",\n          children: esEdicion ? 'Actualizar Producto' : 'Crear Producto'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/admin/productos\",\n          className: \"btn btn-secondary px-5\",\n          children: \"Cancelar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 226,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminProductoForm, \"GBLG2sZGFkj+MIoR/OdZe67Xovw=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = AdminProductoForm;\nvar _c;\n$RefreshReg$(_c, \"AdminProductoForm\");","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","useParams","registrarLogAdmin","getProductoPorCodigo","actualizarProducto","crearProducto","jsxDEV","_jsxDEV","AdminProductoForm","_s","codigo","navigate","esEdicion","productoId","setProductoId","formData","setFormData","nombre","categoria","precio","stock","descripcion","imagen","cargarProducto","response","p","data","id","mapearCategoria","categoriaId","categorias","precioVenta","stockActual","imagenUrl","error","console","productos","JSON","parse","localStorage","getItem","producto","find","window","notificar","handleChange","e","name","value","target","prev","handleImageChange","file","files","size","type","startsWith","reader","FileReader","onloadend","result","readAsDataURL","handleSubmit","preventDefault","trim","parseFloat","parseInt","payload","mapearCategoriaAId","marca","precioBase","costo","destacado","activo","_error$response","_error$response$data","_error$response2","mensajeError","status","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","onSubmit","htmlFor","onChange","disabled","min","max","step","rows","accept","placeholder","src","alt","onError","_c","$RefreshReg$"],"sources":["C:/Users/SoraR/OneDrive/Escritorio/Codigo/Front_level_up/Entrega EVA3/level-up/src/pages/AdminProductoForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate, useParams } from 'react-router-dom';\r\nimport { registrarLogAdmin } from '../utils/logManager';\r\nimport { getProductoPorCodigo, actualizarProducto, crearProducto } from '../utils/api';\r\nimport '../styles/Admin.css';\r\n\r\nexport default function AdminProductoForm() {\r\n  const { codigo } = useParams();\r\n  const navigate = useNavigate();\r\n  const esEdicion = !!codigo;\r\n\r\n  const [productoId, setProductoId] = useState(null);\r\n  const [formData, setFormData] = useState({\r\n    codigo: '',\r\n    nombre: '',\r\n    categoria: 'Juegos de Mesa',\r\n    precio: '',\r\n    stock: '',\r\n    descripcion: '',\r\n    imagen: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (esEdicion) {\r\n      cargarProducto();\r\n    }\r\n  }, [codigo, esEdicion]);\r\n\r\n  const cargarProducto = async () => {\r\n    try {\r\n      const response = await getProductoPorCodigo(codigo);\r\n      const p = response.data;\r\n\r\n      setProductoId(p.id); // Guardar el ID para la actualizaci√≥n\r\n\r\n      const mapearCategoria = (categoriaId) => {\r\n        const categorias = {\r\n          1: 'Consolas',\r\n          2: 'Videojuegos',\r\n          3: 'Accesorios',\r\n          4: 'PC Gaming',\r\n          5: 'Auriculares'\r\n        };\r\n        return categorias[categoriaId] || 'Otros';\r\n      };\r\n\r\n      setFormData({\r\n        codigo: p.codigo,\r\n        nombre: p.nombre,\r\n        categoria: mapearCategoria(p.categoriaId),\r\n        precio: p.precioVenta || p.precio || 0,\r\n        stock: p.stockActual || p.stock || 0,\r\n        descripcion: p.descripcion || '',\r\n        imagen: p.imagenUrl || p.imagen || '/assets/imgs/destacado1.png'\r\n      });\r\n    } catch (error) {\r\n      console.error('Error al cargar producto:', error);\r\n      \r\n      // Fallback a localStorage\r\n      const productos = JSON.parse(localStorage.getItem('productos') || '[]');\r\n      const producto = productos.find(p => p.codigo === codigo);\r\n      \r\n      if (producto) {\r\n        setFormData(producto);\r\n        setProductoId(producto.id);\r\n      } else {\r\n        if (window.notificar) {\r\n          window.notificar('Producto no encontrado', 'error', 3000);\r\n        }\r\n        navigate('/admin/productos');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleImageChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      if (file.size > 5000000) {\r\n        if (window.notificar) {\r\n          window.notificar('La imagen no puede pesar m√°s de 5MB', 'error', 3000);\r\n        }\r\n        return;\r\n      }\r\n\r\n      if (!file.type.startsWith('image/')) {\r\n        if (window.notificar) {\r\n          window.notificar('Solo se permiten archivos de imagen', 'error', 3000);\r\n        }\r\n        return;\r\n      }\r\n\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        setFormData(prev => ({\r\n          ...prev,\r\n          imagen: reader.result\r\n        }));\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!formData.codigo.trim() || !formData.nombre.trim() || !formData.precio || !formData.stock || !formData.descripcion.trim() || !formData.imagen.trim()) {\r\n      if (window.notificar) {\r\n        window.notificar('Por favor completa todos los campos obligatorios', 'error', 3000);\r\n      }\r\n      return;\r\n    }\r\n\r\n    const precio = parseFloat(formData.precio);\r\n    if (precio >= 10000000) {\r\n      if (window.notificar) {\r\n        window.notificar('El precio no puede ser mayor o igual a $10.000.000', 'error', 3000);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (precio <= 0) {\r\n      if (window.notificar) {\r\n        window.notificar('El precio debe ser mayor a $0', 'error', 3000);\r\n      }\r\n      return;\r\n    }\r\n\r\n    const stock = parseInt(formData.stock);\r\n    if (stock >= 10000000) {\r\n      if (window.notificar) {\r\n        window.notificar('El stock no puede ser mayor o igual a 10.000.000', 'error', 3000);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (stock < 0) {\r\n      if (window.notificar) {\r\n        window.notificar('El stock no puede ser negativo', 'error', 3000);\r\n      }\r\n      return;\r\n    }\r\n\r\n    try {\r\n      if (esEdicion) {\r\n        // Actualizar producto en el backend\r\n        const payload = {\r\n          nombre: formData.nombre,\r\n          precioVenta: parseFloat(formData.precio),\r\n          stockActual: parseInt(formData.stock),\r\n          descripcion: formData.descripcion,\r\n          imagenUrl: formData.imagen\r\n        };\r\n\r\n        await actualizarProducto(productoId, payload);\r\n        \r\n        registrarLogAdmin(`Edit√≥ producto: ${formData.nombre} (${formData.codigo})`);\r\n        if (window.notificar) {\r\n          window.notificar('Producto actualizado exitosamente', 'success', 3000);\r\n        }\r\n        navigate('/admin/productos');\r\n      } else {\r\n        // Crear nuevo producto en el backend\r\n        const mapearCategoriaAId = (categoria) => {\r\n          const categorias = {\r\n            'Consolas': 1,\r\n            'Videojuegos': 2,\r\n            'Accesorios': 3,\r\n            'PC Gaming': 4,\r\n            'Auriculares': 5,\r\n            'Juegos de Mesa': 3,\r\n            'Figuras': 3,\r\n            'Otros': 3\r\n          };\r\n          return categorias[categoria] || 3;\r\n        };\r\n\r\n        const payload = {\r\n          codigo: formData.codigo,\r\n          nombre: formData.nombre,\r\n          descripcion: formData.descripcion,\r\n          categoriaId: mapearCategoriaAId(formData.categoria),\r\n          marca: 'Gen√©rica',\r\n          precioBase: parseFloat(formData.precio) * 0.85,\r\n          precioVenta: parseFloat(formData.precio),\r\n          costo: parseFloat(formData.precio) * 0.7,\r\n          stockActual: parseInt(formData.stock),\r\n          imagenUrl: formData.imagen,\r\n          destacado: false,\r\n          activo: true\r\n        };\r\n\r\n        await crearProducto(payload);\r\n        \r\n        registrarLogAdmin(`Cre√≥ producto: ${formData.nombre} (${formData.codigo})`);\r\n        if (window.notificar) {\r\n          window.notificar('Producto creado exitosamente', 'success', 3000);\r\n        }\r\n        navigate('/admin/productos');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error al guardar producto:', error);\r\n      \r\n      let mensajeError = 'Error al guardar el producto. Intenta nuevamente.';\r\n      \r\n      if (error.response?.data?.error) {\r\n        mensajeError = error.response.data.error;\r\n      } else if (error.response?.status === 409) {\r\n        mensajeError = 'Ya existe un producto con ese c√≥digo';\r\n      }\r\n      \r\n      if (window.notificar) {\r\n        window.notificar(mensajeError, 'error', 3000);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"container admin-page\">\r\n      <div className=\"mb-4\">\r\n        <h2 className=\"section-title mb-2\">\r\n          {esEdicion ? 'Editar Producto' : 'Nuevo Producto'}\r\n        </h2>\r\n        <Link to=\"/admin/productos\" className=\"text-secondary\">\r\n          ‚Üê Volver a Productos\r\n        </Link>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit} className=\"admin-form\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-6 mb-3\">\r\n            <label htmlFor=\"codigo\" className=\"form-label\">C√≥digo *</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"codigo\"\r\n              name=\"codigo\"\r\n              value={formData.codigo}\r\n              onChange={handleChange}\r\n              disabled={esEdicion}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"col-md-6 mb-3\">\r\n            <label htmlFor=\"nombre\" className=\"form-label\">Nombre *</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"nombre\"\r\n              name=\"nombre\"\r\n              value={formData.nombre}\r\n              onChange={handleChange}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"col-md-6 mb-3\">\r\n            <label htmlFor=\"categoria\" className=\"form-label\">Categor√≠a *</label>\r\n            <select\r\n              className=\"form-select\"\r\n              id=\"categoria\"\r\n              name=\"categoria\"\r\n              value={formData.categoria}\r\n              onChange={handleChange}\r\n            >\r\n              <option value=\"Juegos de Mesa\">Juegos de Mesa</option>\r\n              <option value=\"Accesorios\">Accesorios</option>\r\n              <option value=\"Consolas\">Consolas</option>\r\n              <option value=\"Videojuegos\">Videojuegos</option>\r\n              <option value=\"Figuras\">Figuras</option>\r\n              <option value=\"Otros\">Otros</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"col-md-3 mb-3\">\r\n            <label htmlFor=\"precio\" className=\"form-label\">Precio *</label>\r\n            <input\r\n              type=\"number\"\r\n              className=\"form-control\"\r\n              id=\"precio\"\r\n              name=\"precio\"\r\n              value={formData.precio}\r\n              onChange={handleChange}\r\n              min=\"1\"\r\n              max=\"9999999\"\r\n              step=\"1\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"col-md-3 mb-3\">\r\n            <label htmlFor=\"stock\" className=\"form-label\">Stock *</label>\r\n            <input\r\n              type=\"number\"\r\n              className=\"form-control\"\r\n              id=\"stock\"\r\n              name=\"stock\"\r\n              value={formData.stock}\r\n              onChange={handleChange}\r\n              min=\"0\"\r\n              max=\"9999999\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"col-12 mb-3\">\r\n            <label htmlFor=\"descripcion\" className=\"form-label\">Descripci√≥n *</label>\r\n            <textarea\r\n              className=\"form-control\"\r\n              id=\"descripcion\"\r\n              name=\"descripcion\"\r\n              value={formData.descripcion}\r\n              onChange={handleChange}\r\n              rows=\"3\"\r\n            ></textarea>\r\n          </div>\r\n\r\n          <div className=\"col-12 mb-3\">\r\n            <label htmlFor=\"imagen\" className=\"form-label\">Imagen del Producto *</label>\r\n            <div className=\"mb-2\">\r\n              <label \r\n                htmlFor=\"imagenFile\" \r\n                className=\"btn btn-success w-100 admin-form-imagen-label\"\r\n              >\r\n                üìÅ Seleccionar Imagen desde el Computador\r\n              </label>\r\n              <input\r\n                type=\"file\"\r\n                className=\"form-control admin-form-imagen-input-hidden\"\r\n                id=\"imagenFile\"\r\n                accept=\"image/*\"\r\n                onChange={handleImageChange}\r\n              />\r\n              <small className=\"admin-form-imagen-info\">Formatos: JPG, PNG, GIF. M√°ximo 5MB</small>\r\n            </div>\r\n            <div className=\"mb-2 admin-form-url-label\">O ingresa una URL:</div>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"imagen\"\r\n              name=\"imagen\"\r\n              value={formData.imagen}\r\n              onChange={handleChange}\r\n              placeholder=\"/assets/imgs/producto.png o https://ejemplo.com/imagen.jpg\"\r\n            />\r\n            {formData.imagen && (\r\n              <div className=\"mt-3 text-center\">\r\n                <p className=\"text-white mb-2\">Vista previa:</p>\r\n                <img \r\n                  src={formData.imagen} \r\n                  alt=\"Preview\"\r\n                  className=\"admin-form-preview-img\"\r\n                  onError={(e) => {\r\n                    e.target.src = '/assets/icons/icono.png';\r\n                  }}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"d-flex gap-3 mt-4 justify-content-center\">\r\n          <button \r\n            type=\"submit\" \r\n            className=\"btn btn-success px-5\"\r\n          >\r\n            {esEdicion ? 'Actualizar Producto' : 'Crear Producto'}\r\n          </button>\r\n          <Link \r\n            to=\"/admin/productos\" \r\n            className=\"btn btn-secondary px-5\"\r\n          >\r\n            Cancelar\r\n          </Link>\r\n        </div>\r\n      </form>\r\n    </main>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}